<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Explorador Estelar - Diagrama H-R</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: radial-gradient(circle at center, #0a192f 0%, #000000 100%);
            color: white;
            font-family: 'Space Mono', monospace;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
            margin-bottom: 5px;
        }

        .main-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            width: 100%;
            max-width: 1200px;
        }

        #hr-plot {
            width: 800px;
            height: 600px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .info-card {
            width: 320px;
            padding: 25px;
            background: rgba(10, 25, 47, 0.9);
            border: 2px solid #4fc3f7;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.2);
            height: fit-content;
        }

        #star-name {
            color: #4fc3f7;
            margin-top: 0;
            border-bottom: 1px solid rgba(79, 195, 247, 0.3);
            padding-bottom: 10px;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 0.9rem;
        }

        .btn-habitable {
            width: 100%;
            background: #00c853;
            color: black;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Space Mono', monospace;
            margin-top: 20px;
            transition: 0.3s;
            text-transform: uppercase;
        }

        .btn-habitable:hover {
            background: #b2ff59;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.4);
        }

        @media (max-width: 900px) {
            #hr-plot { width: 100%; height: 400px; }
            .info-card { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Diagrama Hertzsprung-Russell</h1>
        <p>Selecciona una estrella para explorar su sistema planetario</p>
    </div>

    <div class="main-container">
        <div id="hr-plot"></div>

        <div id="info-panel" class="info-card">
            <h2 id="star-name">Selecciona una estrella</h2>
            <div id="star-details">
                <div class="data-row">
                    <span>Temperatura:</span>
                    <span><span id="val-temp">-</span> K</span>
                </div>
                <div class="data-row">
                    <span>Luminosidad:</span>
                    <span><span id="val-lum">-</span> L<sub>☉</sub></span>
                </div>
                <div id="action-container">
                    </div>
            </div>
        </div>
    </div>

    <script>
        // 1. Datos Sincronizados con tu archivo sistema.html
        const estrellas = {
    'Supergigantes Rojas': [
        { nombre: 'Betelgeuse', temp: 3700, lum: 100000, color: '#ff3d00', size: 45, hasPlanets: false },
        { nombre: 'Antares', temp: 3660, lum: 75900, color: '#ff3d00', size: 42, hasPlanets: false },
        { nombre: 'Mu Cephei', temp: 3551, lum: 269000, color: '#ff6e40', size: 48, hasPlanets: false },
        { nombre: 'VY Canis Majoris', temp: 3490, lum: 270000, color: '#ff3d00', size: 50, hasPlanets: false },
    ],
    'Supergigantes Azules': [
        { nombre: 'Rigel A', temp: 12100, lum: 120000, color: '#80deea', size: 35, hasPlanets: false },
        { nombre: 'Deneb', temp: 8525, lum: 196000, color: '#e1f5fe', size: 38, hasPlanets: false },
        { nombre: 'Alnilam', temp: 27500, lum: 537000, color: '#b3e5fc', size: 40, hasPlanets: false },
        { nombre: 'Alnitak', temp: 29500, lum: 250000, color: '#b3e5fc', size: 38, hasPlanets: false },
        { nombre: 'Naos', temp: 42000, lum: 813000, color: '#00e5ff', size: 42, hasPlanets: false }
    ],
    'Gigantes (Rojas y Naranjas)': [
        { nombre: 'Arcturus', temp: 4286, lum: 170, color: '#ffb74d', size: 25, hasPlanets: false},
        { nombre: 'Aldebaran', temp: 3910, lum: 518, color: '#ffcc80', size: 28, hasPlanets: false},
        { nombre: 'Pollux', temp: 4660, lum: 43, color: '#ffe0b2', size: 22, hasPlanets: true, systemID: 'Pollux' },
        { nombre: 'Mirach', temp: 3800, lum: 2000, color: '#ffa726', size: 30, hasPlanets: false },
        { nombre: 'Capella', temp: 4970, lum: 78, color: '#fff9c4', size: 22, hasPlanets: false },
        { nombre: 'Mira', temp: 3500, lum: 8400, color: '#ff7043', size: 32, hasPlanets: false },
        { nombre: 'Scheat', temp: 3700, lum: 1500, color: '#ff8a65', size: 28, hasPlanets: false }
    ],
    'Secuencia Principal (O, B, A)': [
        { nombre: 'Theta¹ Orionis C', temp: 45000, lum: 400000, color: '#00b0ff', size: 25, hasPlanets: false },
        { nombre: 'Zeta Ophiuchi', temp: 34000, lum: 68000, color: '#40c4ff', size: 22, hasPlanets: false },
        { nombre: 'Spica', temp: 22400, lum: 20500, color: '#81d4fa', size: 20, hasPlanets: false },
        { nombre: 'Achernar', temp: 15000, lum: 3100, color: '#b3e5fc', size: 18, hasPlanets: false },
        { nombre: 'Sirius A', temp: 9940, lum: 25.4, color: '#ffffff', size: 16, hasPlanets: false },
        { nombre: 'Vega', temp: 9600, lum: 40.1, color: '#ffffff', size: 16, hasPlanets: false },
        { nombre: 'Fomalhaut', temp: 8590, lum: 16.6, color: '#f5f5f5', size: 15, hasPlanets: true, systemID: 'Fomalhaut' }
    ],
    'Secuencia Principal (F, G, K)': [
        { nombre: 'Procyon A', temp: 6530, lum: 6.9, color: '#fff9c4', size: 14, hasPlanets: false },
        { nombre: 'Sun', temp: 5772, lum: 1.0, color: '#fff176', size: 13, hasPlanets: true, systemID: 'Sol' },
        { nombre: 'Alpha Centauri A', temp: 5790, lum: 1.519, color: '#fff176', size: 13, hasPlanets: false },
        { nombre: 'Tau Ceti', temp: 5344, lum: 0.52, color: '#fff59d', size: 12, hasPlanets: true, systemID: 'Tau Ceti' },
        { nombre: 'Alpha Centauri B', temp: 5260, lum: 0.50, color: '#ffecb3', size: 12, hasPlanets: false },
        { nombre: 'Epsilon Eridani', temp: 5084, lum: 0.34, color: '#ffe0b2', size: 11, hasPlanets: true, systemID: 'Epsilon Eridani' },
        { nombre: '61 Cygni A', temp: 4370, lum: 0.15, color: '#ffcc80', size: 10, hasPlanets: false }
    ],
    'Enanas Rojas (Tipo M)': [
        { nombre: 'Proxima Centauri', temp: 3042, lum: 0.0017, color: '#ff5252', size: 8, hasPlanets: true, systemID: 'Proxima Centauri' },
        { nombre: 'Barnard\'s Star', temp: 3134, lum: 0.0035, color: '#ff5252', size: 8, hasPlanets: true, systemID: 'Barnard' },
        { nombre: 'Gliese 581', temp: 3480, lum: 0.013, color: '#ff5252', size: 8, hasPlanets: true, systemID: 'Gliese 581' },
        { nombre: 'TRAPPIST-1', temp: 2566, lum: 0.0005, color: '#ff1744', size: 7, hasPlanets: true, systemID: 'Trappist-1' },
        { nombre: 'Lacaille 8760', temp: 3340, lum: 0.032, color: '#ff5252', size: 8, hasPlanets: false }
    ],
    'Enanas Blancas': [        
        { nombre: 'Sirius B', temp: 25200, lum: 0.003, color: '#e1f5fe', size: 5, hasPlanets: false },
        { nombre: '40 Eridani B', temp: 16400, lum: 0.013, color: '#ffffff', size: 5, hasPlanets: false },
        { nombre: 'Procyon B', temp: 7740, lum: 0.00049, color: '#f5f5f5', size: 4, hasPlanets: false },
        { nombre: 'Van Maanen', temp: 6220, lum: 0.00017, color: '#f5f5f5', size: 4, hasPlanets: false },
        { nombre: 'WD 0346+246', temp: 3780, lum:  0.00003981, color: '#ffebee', size: 4, hasPlanets: false }
    ]
};

        // 2. Construcción de Traces para Plotly
        const traces = Object.keys(estrellas).map(cat => {
            const group = estrellas[cat];
            return {
                x: group.map(e => e.temp),
                y: group.map(e => e.lum),
                text: group.map(e => e.nombre),
                mode: 'markers',
                name: cat,
                marker: {
                    size: group.map(e => e.size),
                    color: group.map(e => e.color),
                    line: { width: 1, color: 'rgba(255,255,255,0.5)' }
                },
                customdata: group.map(e => e)
            };
        });

        // 3. Configuración del Layout (Científico)
        const layout = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(255,255,255,0.02)',
            xaxis: {
                title: 'Temperatura Efectiva (K)',
                type: 'log',
                autorange: 'reversed', // Caliente a la izquierda
                gridcolor: '#1f2937',
                color: 'white',
               tickvals: [2000, 3000, 5000, 10000, 30000, 50000],
                ticktext: ['2000', '3000', '5000', '10000', '30000', '50000']
            },
            yaxis: {
                title: 'Luminosidad (L/L☉)',
                type: 'log',
                gridcolor: '#1f2937',
                color: 'white'
            },
            hovermode: 'closest',
            font: { family: 'Space Mono', color: 'white' },
            margin: { t: 30, b: 60, l: 80, r: 30 }
        };

        Plotly.newPlot('hr-plot', traces, layout);

        // 4. Lógica de Interacción y Redirección
        document.getElementById('hr-plot').on('plotly_click', function(data){
            const info = data.points[0].customdata;
            
            // Actualizar Interfaz
            document.getElementById('star-name').innerText = info.nombre;
            document.getElementById('val-temp').innerText = info.temp.toLocaleString();
            document.getElementById('val-lum').innerText = info.lum;

            const actionContainer = document.getElementById('action-container');
            actionContainer.innerHTML = ''; 

            if (info.hasPlanets) {
                const btn = document.createElement('button');
                btn.className = 'btn-habitable';
                btn.innerHTML = 'Explorar Sistema ➜';
                btn.onclick = () => {
                    // REDIRECCIÓN A sistema.html CON EL ID DE LA ESTRELLA
                    const targetURL = `hzsystem.html?system=${encodeURIComponent(info.systemID)}`;
                    window.location.href = targetURL;
                };
                actionContainer.appendChild(btn);
            } else {
                actionContainer.innerHTML = '<p style="color: #888; font-size: 0.8rem; margin-top:20px;">Este sistema no tiene planetas configurados en el simulador.</p>';
            }
        });
    </script>
</body>
</html>
