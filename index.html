<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Explorador Estelar - Diagrama H-R</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: radial-gradient(circle at center, #0a192f 0%, #000000 100%); color: white; font-family: 'Space Mono', monospace; margin: 0; padding: 20px; display: flex;
            flex-direction: column; align-items: center;}
        .header { text-align: center; margin-bottom: 15px; }
        h1 { color: #4fc3f7; text-shadow: 0 0 10px rgba(79, 195, 247, 0.5); margin: 0; }
        .main-container {display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; max-width: 1200px;}        
        .info-card {width: 100%; max-width: 1100px; padding: 15px 25px; background: rgba(10, 25, 47, 0.9); border: 2px solid #4fc3f7; border-radius: 12px; box-shadow: 0 0 20px rgba(79, 195, 247, 0.2);
            display: flex; justify-content: space-between; align-items: center; box-sizing: border-box;}
        #star-name { color: #4fc3f7; margin: 0; font-size: 1.4rem; min-width: 250px;}
        .details-row {display: flex; gap: 40px; align-items: center; flex-grow: 1; justify-content: center;}
        .data-item { font-size: 1rem; }
        .data-item span:first-child { color: #888; margin-right: 5px; }
        .btn-habitable {background: #00c853; color: black; border: none; padding: 8px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; font-family: 'Space Mono', monospace;
            text-transform: uppercase; transition: 0.3s; white-space: nowrap;}
        .btn-habitable:hover { background: #b2ff59; box-shadow: 0 0 15px rgba(0, 200, 83, 0.4);}        
        #hr-plot {width: 1100px; height: 550px; background: rgba(255, 255, 255, 0.02); border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.5);}
        @media (max-width: 1150px) {#hr-plot { width: 95vw; height: 500px; }
                                    .info-card { flex-direction: column; gap: 15px; text-align: center; }
                                    .details-row { flex-direction: column; gap: 10px; }}
    </style>
</head>
<body>

    <div class="header">
        <h1>Diagrama Hertzsprung-Russell</h1>
    </div>

    <div class="main-container">
        <div id="info-panel" class="info-card">
            <h2 id="star-name">Selecciona una estrella</h2>
            
            <div class="details-row">
                <div class="data-item">
                    <span>Temperatura:</span>
                    <span id="val-temp">-</span> K
                </div>
                <div class="data-item">
                    <span>Luminosidad:</span>
                    <span id="val-lum">-</span> L<sub>☉</sub>
                </div>
            </div>

            <div id="action-container">
                </div>
        </div>

        <div id="hr-plot"></div>
    </div>

    <script>
         const estrellas = {
    'Supergigantes Rojas': [
        { nombre: 'VY Canis Majoris', temp: 3490, lum: 270000, color: '#ff3d00', size: 80, hasPlanets: false },       
        { nombre: 'V915 Scorpii', temp: 3600, lum: 74000, color: '#ff3d00', size: 70, hasPlanets: false },
        { nombre: 'Betelgeuse', temp: 3600, lum: 100000, color: '#ff3d00', size: 42, hasPlanets: false },
        { nombre: 'Antares', temp: 3600, lum: 75900, color: '#ff3d00', size: 40, hasPlanets: false },
    ],
    'Supergigantes Azules': [
        { nombre: 'Eta Carinae A', temp: 30000, lum: 4600000, color: '#00e5ff', size: 55, hasPlanets: false },
        { nombre: 'Zeta1 Scorpii', temp: 21000, lum: 850000, color: '#80deea', size: 48, hasPlanets: false },       
    ],    
    'Gigantes Azules': [
        { nombre: 'Rigel A', temp: 12100, lum: 120000, color: '#80deea', size: 35, hasPlanets: false },
        { nombre: 'Alnilam', temp: 27500, lum: 537000, color: '#b3e5fc', size: 35, hasPlanets: false }, 
        { nombre: 'Alnitak', temp: 29500, lum: 250000, color: '#b3e5fc', size: 35, hasPlanets: false }, 
        { nombre: 'Mintaka', temp: 29500, lum: 190000, color: '#b3e5fc', size: 33, hasPlanets: false }  
    ],
    'Gigantes (Rojas y Naranjas)': [
        { nombre: 'Arcturus', temp: 4286, lum: 170, color: '#ffb74d', size: 25, hasPlanets: true, systemID: 'Arcturus' },
        { nombre: 'Aldebaran', temp: 3910, lum: 518, color: '#ffcc80', size: 28, hasPlanets: true, systemID: 'Aldebaran' },
        { nombre: 'Pollux', temp: 4660, lum: 43, color: '#ffe0b2', size: 22, hasPlanets: true, systemID: 'Pollux' },        
        { nombre: 'Capella', temp: 4970, lum: 78, color: '#fff9c4', size: 22, hasPlanets: false }
    ],
    'Secuencia Principal (O, B, A)': [
        { nombre: 'Theta¹ Orionis C', temp: 45000, lum: 300000, color: '#00b0ff', size: 25, hasPlanets: false },
        { nombre: 'Tau Scorpii', temp: 31440, lum: 20400, color: '#00b0ff', size: 20, hasPlanets: false },
        { nombre: 'Zeta Ophiuchi', temp: 34000, lum: 68000, color: '#40c4ff', size: 22, hasPlanets: false },
        { nombre: 'Spica', temp: 22400, lum: 20500, color: '#81d4fa', size: 20, hasPlanets: false },
        { nombre: 'Achernar A', temp: 15000, lum: 3493, color: '#b3e5fc', size: 18, hasPlanets: false },
        { nombre: 'Achernar B', temp: 9064, lum: 17.5, color: '#ffffff', size: 15, hasPlanets: false },
        { nombre: 'Sirius A', temp: 9882, lum: 25.4, color: '#ffffff', size: 16, hasPlanets: false },
        { nombre: 'Vega', temp: 9830, lum: 40.12, color: '#ffffff', size: 16, hasPlanets: false },
        { nombre: 'Fomalhaut', temp: 8590, lum: 16.6, color: '#f5f5f5', size: 15, hasPlanets: true, systemID: 'Fomalhaut' }
    ],
    'Secuencia Principal (F, G, K)': [
        { nombre: 'Procyon A', temp: 6530, lum: 6.9, color: '#fff9c4', size: 14, hasPlanets: false },
        { nombre: 'Sun', temp: 5772, lum: 1.0, color: '#fff176', size: 13, hasPlanets: true, systemID: 'Sol' },
        { nombre: 'Alpha Centauri A', temp: 5790, lum: 1.519, color: '#fff176', size: 13, hasPlanets: false },
        { nombre: 'Tau Ceti', temp: 5344, lum: 0.52, color: '#fff59d', size: 12, hasPlanets: true, systemID: 'Tau Ceti' },
        { nombre: 'Alpha Centauri B', temp: 5260, lum: 0.50, color: '#ffecb3', size: 12, hasPlanets: false },
        { nombre: 'Epsilon Eridani', temp: 5084, lum: 0.34, color: '#ffe0b2', size: 11, hasPlanets: true, systemID: 'Epsilon Eridani' },
        { nombre: '61 Cygni A', temp: 4370, lum: 0.15, color: '#ffcc80', size: 10, hasPlanets: false }
    ],
    'Enanas Rojas (Tipo M)': [
        { nombre: 'Proxima Centauri', temp: 3042, lum: 0.0017, color: '#ff5252', size: 8, hasPlanets: true, systemID: 'Proxima Centauri' },
        { nombre: 'Barnard\'s Star', temp: 3134, lum: 0.0004, color: '#ff5252', size: 8, hasPlanets: true, systemID: 'Barnard' },
        { nombre: 'Gliese 49', temp: 3805, lum: 0.0492, color: '#ff5252', size: 8, hasPlanets: true, systemID: 'Gliese 49' },
        { nombre: 'TRAPPIST-1', temp: 2566, lum: 0.0005, color: '#ff1744', size: 7, hasPlanets: true, systemID: 'Trappist-1' },        
    ],
    'Enanas Blancas': [        
        { nombre: 'Sirius B', temp: 26083, lum: 0.056, color: '#e1f5fe', size: 5, hasPlanets: false },
        { nombre: '40 Eridani B', temp: 16400, lum: 0.013, color: '#ffffff', size: 5, hasPlanets: false },
        { nombre: 'Procyon B', temp: 7740, lum: 0.00049, color: '#f5f5f5', size: 4, hasPlanets: false },
        { nombre: 'Van Maanen', temp: 6130, lum: 0.00017, color: '#f5f5f5', size: 4, hasPlanets: false },
        { nombre: 'WD 0346+246', temp: 3780, lum:  0.00003981, color: '#ffebee', size: 4, hasPlanets: false }
    ]
};

        const traces = Object.keys(estrellas).map(cat => {
            const group = estrellas[cat];
            return {
                x: group.map(e => e.temp),
                y: group.map(e => e.lum),
                text: group.map(e => e.nombre),
                mode: 'markers',
                name: cat,
                showlegend: false,
                marker: {
                   size: group.map(e => e.size),
                    color: group.map(e => e.color),
                    line: { width: 1, color: 'rgba(255,255,255,0.5)' }
                },
                //customdata: group.map(e => e)
            };
        });

        const layout = {
    paper_bgcolor: 'rgba(0,0,0,0)',
    plot_bgcolor: 'rgba(255,255,255,0.02)',
    showlegend: false,
    xaxis: {
        title: 'Temperatura Efectiva (K)',
        type: 'log',
        autorange: 'reversed', 
        gridcolor: '#1f2937',
        color: 'white',        
        range: [Math.log10(60000), Math.log10(1500)], 
        tickvals: [2000, 3000, 5000, 10000, 20000, 40000, 60000],
        ticktext: ['2k', '3k', '5k', '10k', '20k', '40k', '60k'],
        padding: 20 
    },
    yaxis: {
        title: 'Luminosidad (L/L☉)',
        type: 'log',
        gridcolor: '#1f2937',
        color: 'white',
        range: [-5, 8] 
    },
    hovermode: 'closest',
    font: { family: 'Space Mono', color: 'white' }, 
    margin: { t: 20, b: 80, l: 100, r: 60 } 
};

        Plotly.newPlot('hr-plot', traces, layout);

        document.getElementById('hr-plot').on('plotly_click', function(data){
            const info = data.points[0].customdata;
            
            document.getElementById('star-name').innerText = info.nombre;
            document.getElementById('val-temp').innerText = info.temp.toLocaleString();
            document.getElementById('val-lum').innerText = info.lum;

            const actionContainer = document.getElementById('action-container');
            actionContainer.innerHTML = ''; 

            if (info.hasPlanets) {
                const btn = document.createElement('button');
                btn.className = 'btn-habitable';
                btn.innerHTML = 'Explorar Sistema ➜';
                btn.onclick = () => {
                    const targetURL = `hzsystem.html?system=${encodeURIComponent(info.systemID)}`;
                    window.location.href = targetURL;
                };
                actionContainer.appendChild(btn);
            } else {
                actionContainer.innerHTML = '<span style="color: #666; font-size: 0.8rem;">Sin exoplanetas</span>';
            }
        });
    </script>
</body>
</html>
